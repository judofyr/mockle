Mockle.define('mockie', ['JSON'], function() {

(function(ctx){function parseJSON(str){try{return eval("("+str+")")}catch(err){return{}}}function escapeHTML(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function buildFrame(a,b){var c=buildPayload(b),d=/MSIE (6|7|8|9)/.test(navigator.userAgent)?document.createElement('<iframe name="'+escapeHTML(c)+'">'):document.createElement("iframe");return d.src=a,d.name=c,d.setAttribute("style","position:absolute;top:0;left:-100px;width:1px;height:1px"),d}var prevMockie=ctx.Mockie,M=ctx.Mockie={};M.noConflict=function(){return ctx.Mockie=prevMockie,M};var namePrefix=":mockie:",buildPayload=M.buildPayload=function(a){return namePrefix+JSON.stringify(a)},scripts=document.getElementsByTagName("script"),me=M.element=scripts[scripts.length-1],par=me.parentElement;Mockie.config=parseJSON(me.innerHTML);var idx=ctx.name.search(namePrefix);if(idx==-1)M.payload={};else{var payload=ctx.name.substring(idx+namePrefix.length);M.payload=parseJSON(payload)}M.expose=function(a){if(M.payload.request){var b=M.payload.request;throw b.args.push(function(a){var c=buildFrame(b.caller+"?q=1",{id:M.payload.id,response:a});par.appendChild(c)}),a[b.name].apply(ctx,b.args),ctx.onerror=function(){return!0},""}if(M.payload.response){var c=ctx.parent.parent;c.MOCKIE_RECEIVE(M.payload.id,M.payload.response),ctx.location='javascript:""'}};var callbacks={},genId=0;ctx.MOCKIE_RECEIVE=function(a,b){callbacks[a](null,b)},M.request=function(a,b,c,d){function i(a,b){if(g)return;g=!0,delete callbacks[e],d(a,b)}d||(d=c,c=[]);var e=genId++,f={caller:ctx.location.toString(),name:b,args:c},g=!1,h=buildFrame(a,{id:e,request:f});setTimeout(function(){i("timeout")},3e3),callbacks[e]=i,par.appendChild(h)}})(this);

});
